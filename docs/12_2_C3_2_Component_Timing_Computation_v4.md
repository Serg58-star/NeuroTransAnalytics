# C3.2 — Расчёт компонент временной архитектуры реакции (Component Timing Computation v4)

## 1. Назначение документа

Документ описывает **вычислительные принципы и пайплайны расчёта компонент временной архитектуры зрительной реакции**
в проекте *NeuroTransAnalytics* версии v4.

Цель:

* формализовать расчёт **ΔV1**, **ΔV4** и **ΔV5/MT**;
* обеспечить воспроизводимость исторических подходов;
* допустить сосуществование альтернативных алгоритмов расчёта;
* подготовить данные для сценариев уровней A и B.

Документ **не вводит физиологических интерпретаций**, а фиксирует вычислительную дисциплину.

---

## 2. Общие вычислительные принципы

### 2.1. Принцип компонентной декомпозиции

Временная реакция RT рассматривается как:

* наблюдаемая величина;
* результат сложения и взаимодействия компонент;
* объект декомпозиции без предположения линейной причинности.

---

### 2.2. Принцип независимости от сценария

Расчёт компонент:

* выполняется **до** сценарного анализа;
* не зависит от конкретного сценария A или B;
* предоставляет универсальный слой данных.

---

### 2.3. Принцип версионности алгоритмов

Каждый алгоритм расчёта:

* имеет уникальную версию;
* фиксирует параметры фильтрации;
* может сосуществовать с другими версиями.

---

## 3. Расчёт базовой компоненты ΔV1

### 3.1. Назначение ΔV1

ΔV1 представляет собой:

* базовую сенсомоторную компоненту реакции;
* обязательную часть каждой зрительной реакции;
* точку отсчёта для расчёта производных компонент.

---

### 3.2. Исторический алгоритм расчёта

Исторически ΔV1 вычислялась:

* на основе простой зрительной реакции;
* с применением устойчивых статистик;
* с контролем выбросов (MAD-подход).

Фиксируется:

* источник данных для расчёта;
* используемый порог MAD;
* правила исключения атипичных значений.

---

## 4. Расчёт производной компоненты ΔV4

### 4.1. Логика расчёта

ΔV4 определяется как:

* разность между RT реакции на цветовой стимул
* и соответствующим значением ΔV1.

ΔV4 трактуется вычислительно как:

* остаточная временная компонента;
* устойчивая величина при повторных измерениях;
* объект сценарного анализа.

---

### 4.2. Условия корректности

Для расчёта ΔV4 требуется:

* валидное значение RT;
* корректно рассчитанная ΔV1;
* сопоставимость условий предъявления.

---

## 5. Расчёт производной компоненты ΔV5/MT

### 5.1. Логика расчёта

ΔV5/MT определяется как:

* разность между RT реакции на движение
* и соответствующим значением ΔV1.

Как и ΔV4, ΔV5/MT:

* является вычислительной производной;
* не требует априорной физиологической интерпретации.

---

### 5.2. Особенности расчёта

Учитывается:

* повышенная вариабельность;
* чувствительность к условиям теста;
* необходимость сегментарного анализа.

---

## 6. Контроль качества компонентных расчётов

QC включает:

* проверку диапазонов значений;
* устойчивость компонент по сегментам теста;
* согласованность между повторными тестами;
* выявление расчётных артефактов.

Компоненты, не прошедшие QC:

* не удаляются;
* помечаются флагами качества.

---

## 7. Хранение результатов

Результаты расчёта:

* сохраняются в сущности `ComponentTiming`;
* содержат ссылку на `StimulusEvent`;
* включают версию алгоритма и параметры фильтрации.

---

## 8. Связь с последующими уровнями

C3.2 подготавливает данные для:

* C3.3 — агрегаты и контроль качества;
* C3.4 — сценарные вычисления;
* архитектурного анализа A1–A2.

---

## 9. Ограничения и предостережения

Недопустимо:

* интерпретировать компоненты как прямые физиологические измерения;
* модифицировать алгоритмы без фиксации версии;
* использовать компоненты вне контекста условий тестирования.

---

## 10. Итоговая роль документа

C3.2 обеспечивает:

* формально корректный расчёт компонент временной архитектуры реакции;
* основу для архитектурного и сценарного анализа;
* воспроизводимость исторических и новых вычислительных подходов.
