# NeuroTransAnalytics  
## Reference Specification & Methodological Guide

---

## Оглавление

1. Назначение проекта  
2. Общая концепция тестирования  
3. Описание тестов зрительных реакций  
   3.1. Tst1 — Simple Reaction  
   3.2. Tst2 — Color (Red) Reaction  
   3.3. Tst3 — Shift / Movement Reaction  
4. Обработка исключительных ситуаций  
5. Архитектура данных  
   5.1. Общая логика хранения  
   5.2. Таблица users / patients  
   5.3. Таблица trials и производные структуры  
   5.4. Метаданные тестов и параметры системы  
6. Правила расчёта реактивного времени (RT)  
7. Предобработка и фильтрация данных  
8. SQL-представления (VIEW) для аналитики  
9. Канальная и латерализационная группировка  
10. Агрегаты и аналитические показатели  
11. Python-pipeline для анализа  
12. Контроль качества данных (QC)  
13. Форматы финальных выгрузок  
14. Практический чек-лист анализа  
15. Статус документа и принципы развития

---

## 1. Назначение проекта

**NeuroTransAnalytics** — исследовательский и аналитический проект, предназначенный для
структурированной обработки, анализа и интерпретации данных тестирования скоростей зрительных реакций (СЗР).

Проект ориентирован на:
- клинический и функциональный анализ;
- непараметрическую статистику;
- фазовую модель тестирования;
- последующую автоматизацию логической интерпретации данных.

Данный документ является **reference-спецификацией**, а не пользовательской инструкцией.

---

## 2. Общая концепция тестирования

Тестирование основано на регистрации времени реакции (RT, ms) в ответ на визуальные стимулы
при строго контролируемых условиях предъявления.

Основные принципы:
- фиксированная структура попыток;
- учёт преждевременных и пропущенных реакций;
- разделение тестов по типу задействованных зрительных механизмов;
- приоритет внутриличностного анализа.

---

## 3. Описание тестов зрительных реакций

### 3.1. Tst1 — Simple Reaction

- одиночный визуальный стимул;
- фиксированный предстимульный интервал (ISI);
- измерение RT как разности между моментом появления стимула и нажатием.

Назначение:
оценка базовой зрительно-моторной реакции.

---

### 3.2. Tst2 — Color (Red) Reaction

- серия предтестовых стимулов, сгруппированных в тройки;
- тестовый стимул — красный круг;
- ISI формируется последовательностью троек.

Назначение:
оценка реакций на цветовой стимул при изменённой когнитивной нагрузке.

---

### 3.3. Tst3 — Shift / Movement Reaction

- динамическая последовательность;
- смещение тестового круга;
- RT вычисляется относительно момента начала движения.

Назначение:
оценка реакции на движение и перераспределение внимания.

---

## 4. Обработка исключительных ситуаций

Правила регистрации попыток:

- **преждевременное нажатие**  
  RT < MinRedLight → попытка повторяется;

- **запоздалое нажатие**  
  RT > MaxRedLight → попытка считается пропущенной;

- причины повторов и пропусков логируются явно.

---

## 5. Архитектура данных

### 5.1. Общая логика хранения

Данные организованы в реляционной структуре с выделением:
- сырых попыток;
- метаданных тестов;
- параметров системы;
- агрегированных аналитических результатов.

---

### 5.2. Таблица users / patients

Содержит паспортно-демографические данные:
- идентификатор пациента;
- имя, фамилия;
- год рождения;
- пол;
- дата регистрации;
- флаг активности.

Используется исключительно как связующая сущность.

---

### 5.3. Таблица trials и производные структуры

Таблица `trials` включает:
- идентификаторы пациента и сессии;
- тип теста;
- номер стимула;
- временные метки;
- значения RT;
- флаги преждевременных и пропущенных реакций.

---

### 5.4. Метаданные тестов и параметры системы

- `test_metadata` — параметры стимулов;
- `testing_system_parameters` — глобальные настройки эксперимента.

---

## 6. Правила расчёта реактивного времени (RT)

RT вычисляется в зависимости от типа теста:
- Tst1, Tst2 — response_timestamp − stimulus_timestamp;
- Tst3 — response_timestamp − movement_onset_timestamp.

Отрицательные или нереалистичные значения исключаются.

---

## 7. Предобработка и фильтрация данных

- исключение невалидных попыток;
- выбор предпочтительной попытки при повторах;
- подготовка «чистого» набора данных для анализа.

---

## 8. SQL-представления (VIEW) для аналитики

Используются представления:
- `trials_with_rt`;
- `preferred_attempts`;
- `clean_trials`.

Они служат единым источником для аналитических запросов.

---

## 9. Канальная и латерализационная группировка

Данные группируются по:
- центральному и периферическому полю;
- парво- и коньо-ориентированным условиям.

Используется для трактовой интерпретации.

---

## 10. Агрегаты и аналитические показатели

Рекомендуемые показатели:
- число валидных попыток;
- медиана RT;
- среднее RT;
- MAD;
- доля RT > 800 мс;
- показатели стабильности.

---

## 11. Python-pipeline для анализа

Используются:
- pandas;
- numpy;
- scipy.

Предоставляются шаблоны загрузки данных, расчёта агрегатов и визуализации.

---

## 12. Контроль качества данных (QC)

Проверяется:
- целостность временных меток;
- частота повторов;
- распределения RT;
- наличие систематических артефактов.

---

## 13. Форматы финальных выгрузок

Рекомендуемые выходные файлы:
- `patients_summary.csv`;
- `trial_level_clean.csv`.

---

## 14. Практический чек-лист анализа

1. Проверка схемы и VIEW  
2. Предобработка данных  
3. QC  
4. Расчёт агрегатов  
5. Статистический анализ  
6. Интерпретация  

---

## 15. Статус документа и принципы развития

Данный README:
- является живым документом;
- отражает актуальное состояние методологии;
- дополняется по мере развития проекта;
- не фиксирует промежуточные гипотезы без формализации.

